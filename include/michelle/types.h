/*
 * types.h
 *
 *  Created on: Jun 19, 2015
 *      Author: Manuel
 */

#ifndef INCLUDE_MICHELLE_TYPES_H_
#define INCLUDE_MICHELLE_TYPES_H_
#include <SDL2/SDL.h>
#include <SDL2/SDL_opengl.h>
#include <kazmath/kazmath.h>
#include <mruby.h>

//////////////////////////////////////////////////////////////////////////////////////
////
//////////////////////////////////////////////////////////////////////////////////////
typedef struct MCL_window
{
  SDL_Window* window;
  SDL_GLContext* context;
  SDL_Renderer* renderer;
  SDL_Event event;
} MCL_Window;
//////////////////////////////////////////////////////////////////////////////////////
////
//////////////////////////////////////////////////////////////////////////////////////
typedef struct MCL_bitmap
{
  SDL_Surface* surface;
  GLuint glTexture;
} MCL_Bitmap;
//////////////////////////////////////////////////////////////////////////////////////
//// Viewport
//////////////////////////////////////////////////////////////////////////////////////
typedef struct MCL_viewport
{
  mrb_bool sorted;
} MCL_Viewport;

void
viewport_remove_children (mrb_state *mrb, mrb_value viewport, mrb_value children);
void
viewport_add_children (mrb_state *mrb, mrb_value viewport, mrb_value children);
void
draw_viewport (mrb_state *mrb, mrb_value viewport);
//////////////////////////////////////////////////////////////////////////////////////
////
//////////////////////////////////////////////////////////////////////////////////////
typedef struct MCL_sprite
{
  // origin
  mrb_int ox, oy;
  //z
  mrb_float angle;
  //position
  mrb_int x, y;
  //visible
  mrb_bool visible;
  //z
  mrb_int z;
  //src_rect
  SDL_Rect src_rect;
  //vertex array  object
  GLuint vao;
  //vertex buffer object
  GLuint vbo;
  //element array buffer
  GLuint eab;
  //
  GLfloat vertices_position[8];
  GLfloat texture_coord[8];

} MCL_Sprite;

void
draw_sprite (mrb_state *mrb, mrb_value sprite, kmMat4* matrices);
//////////////////////////////////////////////////////////////////////////////////////
////
//////////////////////////////////////////////////////////////////////////////////////
typedef struct MCL_shader
{
  GLuint shaderId;
} MCL_Shader;
#endif /* INCLUDE_MICHELLE_TYPES_H_ */
